<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>FarmerManager.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">lf2u</a> &gt; <a href="index.source.html" class="el_package">org.huzair.use_cases</a> &gt; <span class="el_source">FarmerManager.java</span></div><h1>FarmerManager.java</h1><pre class="source lang-java linenums">package org.huzair.use_cases;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.concurrent.atomic.AtomicInteger;
import org.huzair.boundary_interfaces.FarmerBI;
import org.huzair.entities.Farmer;
import org.huzair.entities.ProductCatalog;
import org.huzair.entities.Store;
import org.huzair.entities.StoreProduct;
import org.huzair.report.FarmerReportType;

<span class="fc" id="L15">public class FarmerManager implements FarmerBI {</span>
	
<span class="fc" id="L17">	private static AtomicInteger atomicInteger = new AtomicInteger();</span>
<span class="fc" id="L18">	private static AtomicInteger atomicInteger_products = new AtomicInteger();</span>
<span class="fc" id="L19">	private static ArrayList&lt;Farmer&gt; farmers = new ArrayList&lt;Farmer&gt;();</span>
<span class="fc" id="L20">	private static Map&lt;String,Double&gt; fspid_price = new HashMap&lt;String,Double&gt;();</span>
<span class="fc" id="L21">	private LF2UManager LM = new LF2UManager();</span>
	
	
	//Create farmer account;
	@Override
	public String createAccount(Farmer f) {
<span class="fc" id="L27">		Farmer farm = f;</span>
<span class="fc" id="L28">		f.setFid(Integer.toString(atomicInteger.incrementAndGet()));</span>
<span class="fc" id="L29">		farmers.add(farm);</span>
<span class="fc" id="L30">		String fid_as_str = farm.getFid();</span>
<span class="fc" id="L31">		farm.setStore();</span>
<span class="fc" id="L32">		return fid_as_str;</span>
	}
	
	//Update farmer account
	@Override
	public void updateAccount(String fid, Farmer f) {
<span class="fc" id="L38">		Farmer farm = getFarmerById(fid);</span>
<span class="pc bpc" id="L39" title="1 of 2 branches missed.">		if(farm!=null){</span>
<span class="fc" id="L40">		farm.setFarm(f);</span>
		}
<span class="fc" id="L42">	}</span>
	
	//Get farmer account by fid
	public Farmer getFarmerById(String fid){
<span class="fc" id="L46">		Iterator&lt;Farmer&gt; f = farmers.listIterator();</span>
<span class="fc bfc" id="L47" title="All 2 branches covered.">        while(f.hasNext()) {</span>
<span class="fc" id="L48">            Farmer farm = f.next();</span>
<span class="fc bfc" id="L49" title="All 2 branches covered.">            if(farm.matchesId(fid))</span>
<span class="fc" id="L50">            	return farm;</span>
<span class="fc" id="L51">        }</span>
<span class="fc" id="L52">		return null;</span>
	}
	
	//Get farmer by zipcode
	@Override
	public Farmer getFarmerZip(Farmer farm, String zip){
<span class="fc" id="L58">		ArrayList&lt;String&gt; farmer_zip = farm.getDeliversTo();</span>
<span class="pc bpc" id="L59" title="1 of 4 branches missed.">		if(farmer_zip.contains(zip)||zip==null)</span>
<span class="fc" id="L60">			return farm;</span>
<span class="fc" id="L61">		return null;</span>
	}
	
	//View account by fid
	@Override
	public Farmer viewAccount(String fid) {
<span class="fc" id="L67">		Farmer farm = getFarmerById(fid);</span>
<span class="fc bfc" id="L68" title="All 2 branches covered.">		if(farm!=null)</span>
<span class="fc" id="L69">			return farm;</span>
<span class="fc" id="L70">		return null;</span>
	}

	//View all farmers in the zip
	@Override
	public ArrayList&lt;Farmer&gt; viewFarmers(String zip) {
<span class="fc" id="L76">		ArrayList&lt;Farmer&gt; matchzip = new ArrayList&lt;Farmer&gt;();</span>
<span class="fc" id="L77">		Iterator&lt;Farmer&gt; f = farmers.listIterator();</span>
<span class="fc bfc" id="L78" title="All 2 branches covered.">        while(f.hasNext()) {</span>
<span class="fc" id="L79">            Farmer farm = f.next();</span>
<span class="pc bpc" id="L80" title="1 of 2 branches missed.">            if(getFarmerZip(farm, zip)!=null)</span>
<span class="nc" id="L81">            	matchzip.add(farm);</span>
<span class="fc" id="L82">        }</span>
<span class="fc" id="L83">        return matchzip;</span>
	}

	//View store for farmer by fid
	@Override
	public ArrayList&lt;StoreProduct&gt; viewStore(String fid) {
<span class="fc" id="L89">		ArrayList&lt;StoreProduct&gt; allproducts = new ArrayList&lt;StoreProduct&gt;();</span>
<span class="fc" id="L90">		Farmer farm = getFarmerById(fid);</span>
<span class="pc bpc" id="L91" title="1 of 2 branches missed.">		if(farm==null)</span>
<span class="nc" id="L92">			return allproducts;</span>
<span class="fc" id="L93">		Store store = farm.getStore();</span>
<span class="fc" id="L94">		allproducts = store.getAllStoreProducts();</span>
<span class="fc" id="L95">        return allproducts;</span>
	}

	//Add product to store
	@Override
	public String addProduct(String fid, StoreProduct sproducts) {
<span class="pc bpc" id="L101" title="1 of 2 branches missed.">		if(LM.viewProductById(sproducts.getGcpid())==null)</span>
<span class="nc" id="L102">			return null;</span>
<span class="fc" id="L103">		Farmer farm = getFarmerById(fid);</span>
<span class="fc" id="L104">		Store store = farm.getStore();</span>
<span class="fc" id="L105">		StoreProduct s = sproducts;</span>
<span class="fc" id="L106">		s.setFspid(Integer.toString(atomicInteger_products.incrementAndGet()));</span>
<span class="fc" id="L107">		ProductCatalog pcatalog = LM.viewProductById(s.getGcpid());</span>
<span class="fc" id="L108">		s.setName(pcatalog.getName());</span>
<span class="fc" id="L109">		fspid_price.put(s.getFspid(),s.getPrice());</span>
<span class="fc" id="L110">		store.setStoreProducts(s);</span>
<span class="fc" id="L111">		return s.getFspid();</span>
	}

	//Modify store product
	@Override
	public void modifyProduct(String fid, String fspid, StoreProduct s) {
<span class="fc" id="L117">		StoreProduct sproduct = viewProduct(fid,fspid);</span>
<span class="fc bfc" id="L118" title="All 2 branches covered.">		if(sproduct!=null)</span>
<span class="fc" id="L119">			sproduct.setProduct(s);</span>
<span class="fc" id="L120">	}</span>

	//View delivery charge
	@Override
	public double ViewDelivery(String fid) {
<span class="fc" id="L125">		Farmer farm = getFarmerById(fid);</span>
<span class="fc" id="L126">		return farm.getDeliveryCharge();</span>
	}

	//Update delivery charge
	@Override
	public void UpdateDelivery(String fid,double dc) {
<span class="fc" id="L132">		Farmer farm = getFarmerById(fid);</span>
<span class="fc" id="L133">		farm.setDeliveryCharge(dc);</span>
<span class="fc" id="L134">	}</span>

	//View product by fid
	@Override
	public StoreProduct viewProduct(String fid, String fspid) {
<span class="fc" id="L139">		ArrayList&lt;StoreProduct&gt; sp = viewStore(fid);</span>
<span class="pc bpc" id="L140" title="1 of 2 branches missed.">		if(sp==null)</span>
<span class="nc" id="L141">			return null;</span>
<span class="fc" id="L142">		Iterator&lt;StoreProduct&gt; s = sp.listIterator();</span>
<span class="fc bfc" id="L143" title="All 2 branches covered.">        while(s.hasNext()) {</span>
<span class="fc" id="L144">            StoreProduct sproducts = s.next();</span>
<span class="fc bfc" id="L145" title="All 2 branches covered.">            if(sproducts.matchesId(fspid))</span>
<span class="fc" id="L146">            	return sproducts;</span>
<span class="fc" id="L147">        }</span>
<span class="fc" id="L148">		return null;</span>
	}

	//Get all report types for farmer
	@Override
	public ArrayList&lt;FarmerReportType&gt; allReportTypes() {
<span class="fc" id="L154">		FarmerReportType reports = new FarmerReportType();</span>
<span class="fc" id="L155">		ArrayList&lt;FarmerReportType&gt; allReportTypes = reports.getAllTypes();</span>
<span class="fc" id="L156">		return allReportTypes;</span>
	}

	//Get all farmers
	@Override
	public ArrayList&lt;Farmer&gt; getAllFarmers() {
<span class="fc" id="L162">		return farmers;</span>
	}
	public Map&lt;String,Double&gt; getHashmap(){
<span class="fc" id="L165">		return fspid_price;</span>
	}
	@Override
	public void setNull(){
<span class="fc" id="L169">		farmers.clear();</span>
<span class="fc" id="L170">		fspid_price.clear();</span>
<span class="fc" id="L171">		atomicInteger.set(0);</span>
<span class="fc" id="L172">		atomicInteger_products.set(0);</span>
<span class="fc" id="L173">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.1.201405082137</span></div></body></html>